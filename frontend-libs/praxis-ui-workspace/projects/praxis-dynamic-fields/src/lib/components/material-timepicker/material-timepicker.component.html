<div class="pdx-field-container pdx-timepicker-container" [class]="cssClasses() + ' ' + fieldCssClasses()">
  <mat-form-field [appearance]="materialAppearance()" [color]="materialColor()" class="pdx-timepicker-field">
    <mat-label>{{ metadata()?.label }}</mat-label>
    <input
      matInput
      type="time"
      [id]="componentId() + '-input'"
      [formControl]="formControl"
      [placeholder]="getTimePlaceholder()"
      [readonly]="metadata()?.readonly"
      [disabled]="effectiveDisabled()"
      [attr.aria-describedby]="getAriaDescribedBy()"
      (focus)="onInputFocus()"
      (blur)="onInputBlur()"
      (input)="onTimeInput($event)">
    <mat-icon
      matSuffix
      class="pdx-time-icon"
      [class.disabled]="effectiveDisabled()"
      tabindex="0"
      (click)="openTimePicker()"
      (keydown.enter)="openTimePicker()"
      (keydown.space)="openTimePicker()">
      access_time
    </mat-icon>
    <mat-hint *ngIf="metadata()?.hint && !hasValidationError()" [id]="componentId() + '-hint'">
      {{ metadata()?.hint }}
    </mat-hint>
    <mat-error *ngIf="hasValidationError()" [id]="componentId() + '-error'">
      {{ primaryErrorMessage() }}
    </mat-error>
  </mat-form-field>

  <!-- Simple dialog with native time input -->
  <div *ngIf="isPickerOpen()" class="pdx-time-picker-overlay" (click)="closeTimePicker()">
    <div class="pdx-time-picker-dialog" (click)="$event.stopPropagation()">
      <input type="time" [value]="tempValue()" (input)="onTempInputChange($event)">
      <div class="pdx-time-picker-actions">
        <button mat-button (click)="closeTimePicker()">Cancelar</button>
        <button mat-button color="primary" (click)="confirmTime()">OK</button>
      </div>
    </div>
  </div>
</div>
