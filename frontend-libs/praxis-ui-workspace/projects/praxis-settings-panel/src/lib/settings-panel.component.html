<div
  class="settings-panel"
  [class.expanded]="expanded"
  role="dialog"
  aria-modal="true"
  [attr.aria-labelledby]="titleId"
  cdkTrapFocus
  cdkTrapFocusAutoCapture
>
  <header class="settings-panel-header">
    <h2 class="settings-panel-title" [id]="titleId">{{ title }}</h2>
    <span class="spacer"></span>
    <button
      mat-icon-button
      type="button"
      [attr.aria-label]="expanded ? 'Reduzir painel' : 'Expandir painel'"
      [attr.aria-expanded]="expanded"
      [matTooltip]="expanded ? 'Reduzir painel' : 'Expandir painel'"
      (click)="toggleExpand()"
    >
      <mat-icon>{{ expanded ? "chevron_right" : "chevron_left" }}</mat-icon>
    </button>
    <button
      mat-icon-button
      type="button"
      aria-label="Fechar"
      matTooltip="Fechar"
      (click)="onCancel()"
    >
      <mat-icon>close</mat-icon>
    </button>
  </header>
  <div class="settings-panel-body">
    <ng-template #contentHost></ng-template>
  </div>
  <footer class="settings-panel-footer">
    <button mat-button type="button" (click)="onReset()" [disabled]="isBusy">
      Redefinir
    </button>
    <span class="spacer"></span>
    <button
      mat-stroked-button
      type="button"
      (click)="onCancel()"
      [disabled]="isBusy"
    >
      Cancelar
    </button>
    <button
      mat-stroked-button
      type="button"
      (click)="onApply()"
      [disabled]="!canApply"
      [matTooltip]="disabledReason"
      [matTooltipDisabled]="canApply"
      aria-busy="isBusy"
    >
      <mat-progress-spinner
        *ngIf="isBusy"
        mode="indeterminate"
        diameter="20"
      ></mat-progress-spinner>
      <span *ngIf="!isBusy">Aplicar</span>
    </button>
    <button
      mat-flat-button
      color="primary"
      type="button"
      (click)="onSave()"
      [disabled]="!canSave"
      [matTooltip]="disabledReason"
      [matTooltipDisabled]="canSave"
      aria-busy="isBusy"
    >
      <mat-progress-spinner
        *ngIf="isBusy"
        mode="indeterminate"
        diameter="20"
      ></mat-progress-spinner>
      <span *ngIf="!isBusy">Salvar &amp; Fechar</span>
    </button>
  </footer>
</div>
